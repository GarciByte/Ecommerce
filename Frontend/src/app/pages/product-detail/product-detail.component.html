<app-nav></app-nav>


@if (product) {
<div class="container flex flex-wrap justify-content-center m-8 ">

    <!--imagen producto-->
    <section class="imageProduct w-3 m-auto">
        <img [src]="IMG_URL + product.image" class="m-auto w-full">
    </section>

    <!-- info del producto -->
    <section class="infoProduct w-6">
        <h1>{{product.name}}</h1>
        <span class="price">{{product.price/100}}‚Ç¨</span>
        <p>{{product.description}}</p>

        <div class="inputQuantity">
            <p-inputNumber [(ngModel)]="quantity" class="w-full" [showButtons]="true" buttonLayout="horizontal"
                inputId="horizontal" spinnerMode="horizontal" [step]="1" [min]="1"
                decrementButtonClass="p-button-secondary" incrementButtonClass="p-button-secondary"
                incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" />
        </div>


        <!-- boton a√±adir cesta -->
        <button class="m-4 p-button font-bold ml-4 vertical-align-middle">A√±adir a la cesta</button>


    </section>

    <section class="review w-full">
        <h1>Rese√±as</h1>
        <p>{{reviews.length}} rese√±as.</p>

        <p *ngIf="!authService.isAuthenticated()">
            Para poder escribir una rese√±a debe <a href="/login">iniciar sesi√≥n.</a>
        </p>

        <!-- FORMULARIO PARA HACER RESE√ëA -->
        <div *ngIf="authService.isAuthenticated()">
            <form (ngSubmit)="publicReview()">
                <textarea pInputText [(ngModel)]="textReview" [ngModelOptions]="{standalone: true}"
                    placeholder="Escribe una rese√±a">
                </textarea>
                <input type="submit" value="Enviar" class="p-button font-bold ml-2" />
            </form>
        </div>


        <br>

        @for (review of reviews; track review.reviewId) {
        <div class="review">
            @for (user of users; track user.id) {
                @if(user.id == review.userId){
                <span class="font-bold">{{user.name}}</span>
                }
            }
            <span> {{review.date | date:'dd MMM YYYY HH:mm' | lowercase}}</span>
            
            @switch (review.label) {
                @case (1) {
                    <div>üòÄ</div>
                }
                @case (0) {
                    <div>üòê</div>
                }
                @case (-1) {
                    <div>üò•</div>
                }
            }
            <p>{{review.text}}</p>
        </div>

        }
        @empty {
        <div>No hay rese√±as</div>
        }


    </section>


</div>
}

<app-footer></app-footer>